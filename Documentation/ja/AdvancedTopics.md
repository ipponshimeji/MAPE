[目次](Index.md)

---

# 詳細なトピック

ここでは、「認証プロキシ爆発しろ！」のさらに詳細な使い方について説明します。

* [Basic認証決めつけモード](#Basic認証決めつけモード)
* [PCがスリープする際の挙動](#PCがスリープする際の挙動)
* [MAPEのログと.NET FrameworkのTraceログとの関係](#MAPEのログと.NET FrameworkのTraceログとの関係)


## Basic認証決めつけモード

Basic認証を要求する認証プロキシとの通信を効率化するモードです。

通常、httpクライアントと認証プロキシとの通信は以下の手順で行われます。

1. httpクライアントが認証プロキシにリクエストを送る。
1. 認証プロキシが407 (Proxy Authentication Required)を返す。その際に認証方式が指定される。
1. httpクライアントは指定された方式の認証情報をつけてリクエストを再送する。
1. プロキシが通信を中継する。

Basic認証決めつけモードでは、
最初のリクエストの段階からBasic認証形式の認証情報を追加してリクエストを送信します。
これで認証が通れば、認証プロキシとの通信が一往復分節約できます。

もし、認証が失敗し、認証プロキシから407が返ってきた場合（パスワードが変更されている、Basic認証以外の認証方式が必要、等）は、
通常の認証処理が実行されます。

Basic認証決めつけモードは対象とする認証プロキシごとに有効/無効を設定します。
認証プロキシに対する認証情報を入力する際に、「Basic認証決めつけモード」を有効にするかどうか指定します。


## PCがスリープする際の挙動

PCがサスペンドする際に、「認証プロキシ爆発しろ！」が通信中継中であれば、中継を中止します。
この場合、PCが復帰したら中継を再び開始します。


## MAPEのログと.NET FrameworkのTraceログとの関係

（未稿）


## 初期設定のデフォルト値

初期設定時に用いる設定のデフォルト値を、
GUI版コマンド（`mapegui.exe`）のアプリケーション構成ファイル（`mapegui.exe.config`）の`appSettings`要素に記述できます。
カスタマイズされた`mapegui.exe.config`とともに「認証プロキシ爆発しろ！」を配布することで、
初期設定時に各環境に合わせたデフォルト値を提供することができます。

設定可能な値は以下の通りです。
設定オブジェクトの詳細については、[設定ファイルリファレンス](Reference_Settings.md)を参照してください。

| キー | 値の型 | 値の内容 |
|:----|:----|:----|:----|
| DefaultActualProxyHostName | 文字列 | `ActualProxy`オブジェクトの`Host`プロパティのデフォルト値 |
| DefaultActualProxyPort | 整数 | `ActualProxy`オブジェクトの`Port`プロパティのデフォルト値 |
| DefaultProxyOverride | 文字列 | `SystemSettingsSwitcher`オブジェクトの`ProxyOverride`プロパティのデフォルト値 |
